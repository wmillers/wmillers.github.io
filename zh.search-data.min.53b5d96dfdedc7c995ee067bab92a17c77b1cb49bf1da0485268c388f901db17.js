'use strict';(function(){const indexCfg={encode:false,tokenize:function(str){return str.replace(/[\x00-\x7F]/g,'').split('');}};indexCfg.doc={id:'id',field:['title','content'],store:['title','href','section'],};const index=FlexSearch.create('balance',indexCfg);window.bookSearchIndex=index;index.add({'id':0,'href':'/posts/','title':"èƒŒæ™¯è¾å°„",'section':"",'content':"menu\n"});index.add({'id':1,'href':'/posts/traps-in-smartdns-on-my-merlin-router/','title':"è®°å½•ä¸€ä¸‹æˆ‘åœ¨é…ç½®smartdnsä¸Šé‡åˆ°çš„å‘",'section':"èƒŒæ™¯è¾å°„",'content':" å†™åœ¨æœ€å‰é¢ï¼šè¿™ä¸ªæ–¹æ¡ˆå‡ºäºæŸäº›åŸå› æš‚æ—¶å¼ƒç”¨ï¼Œè™½ç„¶åŸæœ‰çš„ä¼šå¡ï¼Œä½†æ˜¯smartdnsæ›´å¡ã€‚æ­¤æ–‡ä»…ä½œæµç¨‹å‚è€ƒã€‚\n  è¿™æ¬¡å°†è·¯ç”±å™¨ä¸Šçš„dnsç”±dnsmasqæ›¿æ¢ä¸ºsmartdnsä¸»è¦æ˜¯ä¸ºäº†ä½¿ç”¨ dot (dns over TLS)ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œsmartdnsè¿˜æä¾›äº†å¤šè·¯æŸ¥è¯¢dnsçš„åŠŸèƒ½ã€‚æœ¬æ–‡ä¸»è¦è®°å½•äº†æˆ‘åœ¨éƒ¨ç½²åˆ°æ¢…æ—è·¯ç”±å™¨ä¸Šæ˜¯é‡åˆ°çš„å‘ã€‚\nå¼€å‘è€…æ•™ç¨‹å’Œæ–‡ä»¶é“¾æ¥ï¼šhttps://github.com/pymumu/smartdns\n è¿›å…¥è·¯ç”±å™¨çš„sshç¯å¢ƒ #  åœ¨è·¯ç”±å™¨è®¾ç½®é‡Œæ‰“å¼€sshå¼€å…³ï¼Œæˆ–è€…å’Œæˆ‘ä¸€æ ·ä»è½¯ä»¶ä¸­å¿ƒé‡Œå®‰è£…shellinaboxï¼Œä½¿ç”¨ç½‘é¡µç«¯çš„sshã€‚è¿›å…¥shellinaboxåè¾“å…¥è·¯ç”±å™¨å¸å·å’Œå¯†ç ã€‚\nå®‰è£…entware (opkg) #   ç³»ç»Ÿç®¡ç† \u0026gt; ç³»ç»Ÿè®¾ç½®\n| Enable SSH | æ˜¯ |\n| Enable JFFS custom scripts and configs | æ˜¯ | åœ¨sshç¯å¢ƒä¸­ï¼š  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  #åˆ›å»ºç›®å½• ä¸æ–‡ä»¶ cd /jffs mkdir /jffs/opt ln -nsf /jffs/opt /tmp/opt #ç¼–è¾‘å¯åŠ¨è„šæœ¬ vi /jffs/scripts/post-mount #!/bin/sh ln -nsf /jffs/opt /tmp/opt chmod a+rx /jffs/scripts/post-mount #ä¸‹è½½å®‰è£…è„šæœ¬ å¹¶è¿è¡Œå®‰è£… wget http://qnapware.zyxmon.org/binaries-armv7/installer/entware_install_arm.sh sh ./entware_install_arm.sh #å¥½äº†ç°åœ¨å°±å¯ä»¥ç”¨ å‘½ä»¤å®‰è£…äº† opkg update opkg install xxxx   ä¸åŒäºå®˜æ–¹åœ¨Toolä¸­æä¾›çš„æ–¹æ³•ï¼Œä»¥ä¸Šè„šæœ¬å°†entwareå®‰è£…åœ¨æœ¬ä½“çš„jffsé‡Œï¼Œä¸éœ€è¦é¢å¤–çš„uç›˜æŒ‚è½½ã€‚\nå®‰è£…smartdns #  ä½œè€…æ•™ç¨‹ \u0026amp; è½¯ä»¶åŒ…ä¸‹è½½\næŒ‰ç…§è·¯ç”±å™¨æ¶æ„ (armv7) å’Œå®‰è£…ç¯å¢ƒ (entware/optware) é€‰æ‹©å®‰è£…åŒ…ï¼Œæˆ‘ç”¨çš„æ˜¯smartdns.xxx.arm-optware-all.ipkã€‚\n1 2 3  cd /tmp wget https://github.com/pymumu/smartdns/releases/download/Release33/smartdns.1.2020.09.08-2235.arm-optware-all.ipk opkg install /tmp/smartdns.XXX.ipk   å®‰è£…è¿‡ç¨‹ä¸­ï¼Œæˆ‘é‡åˆ°äº†è·¯ç”±å™¨è¯ä¹¦æœåŠ¡opensslåè®®å¤ªæ—§çš„é—®é¢˜ï¼Œopkgåœ¨å®‰è£…çš„è¿‡ç¨‹ä¸­ä¼šæ ¹æ®ä¾èµ–ä¸‹è½½å…¶ä»–è½¯ä»¶åŒ…ï¼Œç”±äºæœåŠ¡ç«¯åè®®ç‰ˆæœ¬æ¯”è¾ƒé«˜ï¼Œæ‰€ä»¥æœ€åæˆ‘è¿˜æ˜¯æ‰‹åŠ¨ä¸€ä¸ªä¸€ä¸ªä¸‹è½½å®‰è£…ä¾èµ–ã€‚\né…ç½®smartdns #   é»˜è®¤æƒ…å†µä¸‹ï¼Œsmartdnså·¥ä½œåœ¨æ¨¡å¼1ï¼Œå³é€šè¿‡iptableså°†53ç«¯å£å‘å‘åŸæœ‰dnsmasqçš„è¯·æ±‚è½¬å‘åˆ°535ç«¯å£ã€‚å·¥ä½œæ¨¡å¼å¯ä»¥é€šè¿‡ä¿®æ”¹/opt/etc/smartdns/smartdns-opt.confä¸­SMARTDNS_WORKMODEå‚æ•°æ¥è°ƒæ•´ã€‚\n å®‰è£…å®Œæˆånano /opt/etc/smartdns/smartdns.confï¼Œä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š    ä¿®æ”¹ä¸º åŸæœ‰ è¯´æ˜     conf-file smartdns-list.conf - ä¸Šæ¸¸dnsçš„åœ°å€   bind :535 bind [::]:53 åŸä½œè€…çš„å¯åŠ¨è„šæœ¬æœ‰é—®é¢˜ï¼Œéœ€è¦è¿™é‡Œæ‰‹åŠ¨ä¿®æ”¹   bind-tcp :535 - åŒä¸Š   cache-size 40960 cache-size 4096 å¦‚æœjffsç©ºé—´ä¸å¤Ÿçš„è¯å¯æ”¹å°   cache-file /tmp/smartdns.cache - æš‚å­˜æ–‡ä»¶åº”æ”¾åœ¨ramé‡Œ   serve-expired yes - é˜²æ­¢ä¸Šæ¸¸dnså¡é¡¿   prefetch-domain yes - è‡ªåŠ¨åˆ·æ–°è¿‡æœŸdns   force-AAAA-SOA yes - æœ‰å½±å“ï¼Œæ‰€ä»¥å…ˆå…³é—­ipv6è§£æ   rr-ttl-min 60 - ä»ä¸Šæ¸¸dnsè¿”å›çš„ttlè‡³å°‘ä¸º60s   log-level warn log-level info è¿™ä¸ªå¯ä»¥è¯•å®Œäº†ä»¥åæ”¹    åœ¨/opt/etc/smartdns/smartdns-list.confæ·»åŠ ï¼š\n1 2 3 4 5 6 7  # server 127.0.0.1 -group lan -exclude-default-group server 211.140.13.188 server-tcp 211.140.13.188 server-tls doh.pub # ä»¥ä¸‹è¡Œæ·»åŠ ä½ éœ€è¦ä½¿ç”¨åŸæœ‰dnsmasqè§£æçš„å†…ç½‘dhcpä¿¡æ¯ï¼Œæ›¿æ¢lanX domain-rules /lanX/ -speed-check-mode none -nameserver lan # address /lanX/192.168.XX.XX   å»é™¤åŸå¯åŠ¨è„šæœ¬ä¸­ä¼šé”™è¯¯ä¿®æ”¹ç«¯å£çš„bugï¼Œä¿®æ”¹/opt/etc/init.d/S50smartdnsï¼š\n1 2 3 4 5  # å°† set_smartdns_port() çš„ elif [ \u0026#34;$SMARTDNS_WORKMODE\u0026#34; = \u0026#34;1\u0026#34; ]; then åæ³¨é‡Šæ‰ # sed -i \u0026#34;s/^\\\\(bind .*\\\\):53 *\\\\(.*\\\\)\\$/\\\\1:$SMARTDNS_PORT \\\\2/g\u0026#34; $SMARTDNS_CONF  # sed -i \u0026#34;s/^\\\\(bind-tcp .*\\\\):53 *\\\\(.*\\\\)\\$/\\\\1:$SMARTDNS_PORT \\\\2/g\u0026#34; $SMARTDNS_CONF # è¿™ä¸¤è¡Œï¼Œå¹¶æ·»åŠ ä¸€è¡Œ echo fix bugs   åœ¨å¼€æœºå¯åŠ¨è„šæœ¬/jffs/post-mountæ·»åŠ ï¼š\n1  /opt/etc/init.d/rc.unslung start   é‡å¯è·¯ç”±å™¨\næµ‹è¯• #  nslookup -querytype=ptr smartdnsæˆ–è€…é€šè¿‡nslookupæŸ¥è¯¢ä»»æ„ä¸€ä¸ªåŸŸåï¼Œå¦‚æœè¿”å›ipåªæœ‰ä¸€ä¸ªï¼Œè¯´æ˜éƒ¨ç½²æˆåŠŸã€‚\nå®Œ #  "});index.add({'id':2,'href':'/posts/blog-change-theme-record/','title':"åˆ‡æ¢åšå®¢ä¸»é¢˜ \u0026 é˜¶æ®µæ€§æ•´ç†åŸæœ‰ä¸»é¢˜ä¿®æ”¹",'section':"èƒŒæ™¯è¾å°„",'content':" ç®€ä»‹ï¼šè¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä¸ºäº†è®°å½•æˆ‘åœ¨åˆ‡æ¢Hugoä¸»é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œæ‰€éœ€è¦åšçš„å°†éƒ¨åˆ†åœ¨æ—§ä¸»é¢˜Diaryçš„ä¿®æ”¹ä¹ŸåŒæ­¥æ›´æ–°åˆ°æ–°ä¸»é¢˜Hugo-bookä¸­ã€‚åŸè®¡åˆ’é‡Œï¼Œæ–°ä¸»é¢˜æ˜¯Learnï¼Œæ‰€ä»¥åœ¨å‰å‡ æ¬¡commité‡Œå†™çš„æ–°ä¸»é¢˜åç§°å’Œè¿™æ¬¡æ›´æ–°ä»¥åcommité‡Œä¸ä¸€è‡´ã€‚\næ­¤å¤–ï¼Œè¿™ç¯‡æ–‡ç« è¿˜åŒ…æ‹¬äº†æ–°ä¸»é¢˜æ¯”æ—§ä¸»é¢˜å¤šæ‹¥æœ‰çš„åŠŸèƒ½ï¼Œä»¥åŠæˆ‘å¯¹æ¯”å…¶ä»–åšå®¢åå‡†å¤‡åœ¨æ–°ä¸»é¢˜ä¸­é¢å¤–æ·»åŠ çš„åŠŸèƒ½ã€‚\n    Process Name Record(Done?)     Switch theme start 2021.01.03   Review old changes Y   More customize ï¼Ÿ    Changes comparasion in these two themes #  Old changes I made in Diary theme #     File Name Place (. point to themes/diary/) Usage Need to add? Done?     PreventSteal.js In ./layouts/partial/head.html as \u0026lt;script\u0026gt; Jump back to my site \u0026lt;script src=\u0026quot;{{\u0026quot;/vendor/js/creadcss.min.js\u0026quot; | relURL}}\u0026quot; \u0026gt;\u0026lt;/script\u0026gt; Yes Y   .git/ ./ Delete to prevent submodule problem Yes Y   config.toml \u0026lt;home\u0026gt; add CC BY-NC-SA 4.0 - -   copyright.html ./layouts/partials/  Maybe Y   tagCloud.html In /layouts/partials/extrabar.html Need to rewrite No -   404.html ./layouts/ \u0026lt;a href=\u0026quot;/\u0026quot;\u0026gt;404\u0026lt;/a\u0026gt; - -    TODO List in Book theme #    æ ‡ç­¾äº‘ï¼ŒåŸå…ˆä»¥æ•°é‡æ˜¾ç¤ºä¸å¤Ÿå¥½çœ‹ï¼Œæ‰€ä»¥æ¢æˆç°åœ¨è¿™ç§ã€‚\n  å½’æ¡£é¡µé¢\n  ä¸»å­—ä½“ä»Robotoæ”¹ä¸ºPingFang SC è‹¹æ–¹å’Œ Monda\n  æ”¯æŒäºŒç»´ç  qrious\n  Chinese Date Format\nBookDateFormat\n  Find a online CMS article editor for Chinese input-in-browser support (input method in vscode in crostini is broken)\nUsing Chrome Offline App (Minimalist Makrdown Editor)\n  Comments support\nUsing valine and Leancloud, refer to smslit and kokdemo\n  Usable Img uploader PicGo with plugin picgo-plugin-compress by TinyPNG api to host Github\næ³¨æ„ï¼šå› ä¸ºpicgoæ’ä»¶å¸‚åœºæ˜¯åŸºäºnpmçš„ï¼Œæ‰€ä»¥å†…ç½®æœç´¢é¡µå› ä¸ºç½‘ç»œä¸èƒ½ä½¿ç”¨ï¼Œéœ€è¦å…ˆæ‰‹åŠ¨å®‰è£…npmï¼Œå†åœ¨picgoé…ç½®ç›®å½•ä¸‹æ‰‹åŠ¨npm install picgo-xxx --registry=ht tps://registry.npm.taobao.org/åˆ‡æ¢å›½å†…æºå®‰è£…ã€‚\næ‰‹åŠ¨å®‰è£…æ’ä»¶è¿˜æ˜¯å¤±è´¥äº†ï¼Œæœ€åä½¿ç”¨çš„æ˜¯githubä¸Šçš„imgbotå‹ç¼©ã€‚\n  A copy of help pages in Book Demo Site\nContents are Above\n  Add customized main page, remove robot.txt after completion\n   Some changes are inspired by Darren\u0026rsquo;s and TestSmirk and Luzheng\u0026rsquo;s mate blogs built by wordpress.\n  æ·»åŠ ä¿®æ”¹æ—¶é—´git æ›´æ¢ä»£ç å—é¢œè‰²  1 2 3 4 5 6 7 8  # config.toml [markup.highlight] codeFences = true guessSyntax = false lineNos = true lineNumbersInTable = true noClasses = true style = \u0026#34;tango\u0026#34;    ç»™ä»£ç å—æ·»åŠ clipboard.jså¤åˆ¶åŠŸèƒ½ æ–‡ç« å°¾éƒ¨çš„ï¼š copyrightä¿¡æ¯ å‚ç…§1 å‚ç…§é¡µé¢ èœå•å°¾éƒ¨çš„ï¼š bulit by Hugo, powered by \u0026hellip; å‚ç…§ Read count: Valine with Leancloud support Word count pure: single.html \u0026amp; wordcount.html æ”¯æŒè„‘å›¾çš„æ˜¾ç¤º(Kityminder)\nåœ¨çº¿ç»˜åˆ¶å¯¼å‡ºMarkdownæ ¼å¼è·Ÿèƒ½ç”¨çš„ä¸ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨çš„æ˜¯æ— åºåˆ—è¡¨ï¼Œä½†å¯¼å‡ºçš„å´æ˜¯æ ‡é¢˜ï¼Œæ‰€ä»¥ç»˜åˆ¶åŠŸèƒ½æœ€åè¿˜æ˜¯åˆ äº†Mind map support å‚è€ƒæ–‡ä»¶      Root  Level 1  Level 2 Level 2  Level 3 Level 3  Level 4  Level 5  Level 6           Level 1  Level 2 Level 2   Level 1  Level 2 Level 2   Level 1  Level 2 Level 2   Level 1  Level 2 Level 2          Some are also good, but just write here not going to add\n  æŒ‰ç…§æ–‡ä»¶å¤¹ï¼ˆæ¯”å¦‚documents/ä¹¦æœ¬1/ï¼‰ä¸ºåˆ†ç±»æ˜¾ç¤ºå¤šå±‚æ¬¡ç›®å½•ï¼Œå®ä¾‹ç½‘ç«™ï¼Œæ›¿ä»£æ–¹æ¡ˆï¼šç”¨markdownè¡¨ç¤ºæ ‡ç­¾çš„çˆ¶å­é¡ºåºï¼ˆè¡¨æ ¼ï¼Ÿï¼‰ï¼Œæ¨¡æ¿è¯»å–è¯¥æ–‡ä»¶ç”Ÿæˆå…³ç³» Tag cloud æ–°ä¸»é¢˜Bookåœ¨Sectionä¸‹ä¾§è¾¹æ ä¼šæ˜¾ç¤ºæ¯ä¸ªåˆ†ç±»å’Œæ‰€åŒ…æ‹¬æ–‡ç« æ•°ï¼Œæ‰€ä»¥ä¸å†éœ€è¦äº† Add Netlify to auto-generate public/ site\næš‚æ—¶æ²¡å¿…è¦ï¼Œç°åœ¨çš„æ–¹æ¡ˆæ˜¯\n mermaid.initialize({ \"flowchart\": { \"useMaxWidth\":true }, \"theme\": \"neutral\" } ) graph LR; A[hugo --minify]--|cd ./public/|B[git push #submodule x.github.io]--|cd ..|C[git psuh #raw hugo file]  \u0026hellip;  New functionality in Book theme #  Mermaid Online Editor\nMeta info for Card-Showing in other share by Open Graph\nButtons\nContribute  Columns\nLeft Content Lorem markdownum insigne\u0026hellip;  Mid Content Lorem markdownum insigne\u0026hellip;  Right Content Lorem markdownum insigne\u0026hellip;   Details\nTitle Markdown content Lorem markdownum insigne\u0026hellip;   Hints\nMarkdown content\n[info|warning|danger]  Katex\n  \\(f(x) = \\int_{-\\infty}^\\infty\\hat f(\\xi)\\,e^{2 \\pi i \\xi x}\\,d\\xi\\)  Tabs\nMacOS MacOS Content Linux Linux Content Windows Windows Content  "});index.add({'id':3,'href':'/posts/self-signed-ca-server-cert/','title':"è‡ªç­¾ CA å’ŒæœåŠ¡å™¨è¯ä¹¦å‘½ä»¤åˆé›†",'section':"èƒŒæ™¯è¾å°„",'content':"æ—§çš„è‡ªç­¾CAä»¥åŠæœåŠ¡å™¨è¯ä¹¦ç”Ÿæˆçš„å‘½ä»¤åˆé›†ï¼Œæ€»çš„æµç¨‹æ˜¯:\nCA.key+CA.crt #  1 2 3 4 5 6 7 8 9 10 11  #æœåŠ¡å™¨ç«¯ç§é’¥å’ŒCAè¯ä¹¦ç”Ÿæˆ openssl req -x509 -newkey rsa:4096 -new -nodes -sha256 -days 36500 \\  -keyout CA.key -out CA.crt \\  -subj \u0026#39;/CN=Used for LAN - ROOT/O=Ab\u0026#39; \\  -config \u0026lt;(cat /etc/ssl/openssl.cnf - \u0026lt;\u0026lt;END [ x509_ext ] basicConstraints = critical,CA:true subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always,issuer END ) -extensions x509_ext   server.key+server.csr #  1 2 3  openssl req -new -out server.csr -keyout server.key \\  -newkey rsa:4096 -nodes -sha256 \\  -subj \u0026#34;/C=US/ST=/L=/O=Ab/OU=/CN=Debian10\u0026#34;   server.crt #  1 2 3 4 5  openssl x509 -req -days 3650 -CA CA.crt -CAkey CA.key -CAcreateserial \\  -extensions SAN \\  -extfile \u0026lt;(cat /etc/ssl/openssl.cnf \\  \u0026lt;(printf \u0026#34;\\n[SAN]\\nsubjectAltName=DNS:Debian10,IP:192.168.51.24,IP:192.168.51.112,IP:192.168.51.118\u0026#34;)) \\  -in server.csr -out server.crt   server.pfx #  1 2  # Make a package openssl pkcs12 -export -out server.pfx -inkey server.key -in server.crt -certfile CA.crt   Optional: user.key+user.csr\u0026ndash;\u0026gt;user.crt+user.pfx #  1 2 3 4  #å®¢æˆ·ç«¯ç”Ÿæˆ ç”Ÿæˆcsræ˜¯ä¸ºäº†å…¬é’¥ openssl req -new -keyout user.key -out user.csr -newkey rsa:4096 -sha256 -nodes -subj \u0026#39;/CN=Used for LAN/O=Ab\u0026#39; openssl x509 -req -days 3650 -in user.csr -CA CA.crt -CAkey CA.key -CAcreateserial -out user.crt openssl pkcs12 -export -out user.pfx -inkey user.key -in user.crt -certfile CA.crt   "});index.add({'id':4,'href':'/posts/docker-guacamole-rdp/','title':"æå‡å®‰å…¨æ€§ï¼šNginx åå‘ä»£ç† RDP å’Œ IIS æœåŠ¡",'section':"èƒŒæ™¯è¾å°„",'content':"Windows è¿œç¨‹æ¡Œé¢æœåŠ¡ä½œä¸ºå¼€æ”¾ç»™å¤–ç½‘çš„é«˜æƒé™ç³»ç»Ÿç»„ä»¶å­˜åœ¨å¾ˆå¤§çš„å®‰å…¨éšæ‚£ï¼Œå› æ­¤å¦‚æœéœ€è¦ä½¿ç”¨ RDP æœåŠ¡ï¼Œæœ€å¥½ä¸è¦ç›´æ¥å¼€æ”¾å…¶å¯¹åº”çš„ 3389 ç«¯å£ï¼Œè€Œæ˜¯é€šè¿‡Remote Desktop Gatewayè¿™ä¸ªé»˜è®¤å­˜åœ¨äºrdpå®¢æˆ·ç«¯çš„è®¤è¯é€šé“æˆ–è€…æ˜¯é€šè¿‡ä»£ç†æ¥é¿å…ç«¯å£ç›´æ¥æš´éœ²ã€‚ä»¥ä¸Šä¸¤ç§æ–¹å¼å‰è€…è¾ƒéº»çƒ¦ï¼Œåè€…åˆ™é€ æˆæ¯æ¬¡è¿æ¥è¿œç¨‹æ¡Œé¢éƒ½è¦å¼€å¯ä»£ç†ï¼Œéƒ½ä¸å¤ªæ–¹ä¾¿ã€‚æœ¬æ–‡ä»‹ç»å¦‚ä½•ç”¨Nginxåå‘ä»£ç†å‡å°‘æš´éœ²é¢å¤–çš„ç«¯å£å¸¦æ¥çš„å®‰å…¨é£é™©ã€‚Nginxç›‘å¬ 443 ç«¯å£ä¼ å…¥çš„ HTTPS åè®®å†…å®¹ï¼Œå¹¶æŒ‰è·¯å¾„è½¬å‘ç»™ Hyper-v VM Docker ä¸­çš„Guacamoleå’Œ Windows ä¸Šçš„ IIS æœåŠ¡ç«¯ã€‚Guacamoleå°†å®¿ä¸»æœºçš„ RDP æœåŠ¡è½¬æ¢æˆ HTML5 å†…å®¹ï¼Œä¸å†éœ€è¦æœåŠ¡ç«¯å‘å±€åŸŸç½‘å¼€æ”¾ 3389 ç«¯å£ã€‚\næœ¬æ–‡åŸºäºå¦‚ä¸‹ç¯å¢ƒå’Œç¨‹åº\n   Environment Contains      Windows IIS Webserver 10.0 Hyper-v (VM)   Debian10 VM (Hyper-v) Nginx 1.14.2 Docker (Apache Guacamole 1.2.0)    å„ç¨‹åºæœåŠ¡æŒ‰å¤–éƒ¨è®¿é—®æµç¨‹æ’åº\n   Program Usage Env Protocol Address     Nginx HTTPS reverse proxy Debian10 VM HTTPS 192.168.51.118:443 Lan 192.168.208.146 VM   IIS Webserver Other web app (Webdav) Windows HTTP 192.168.208.145:8088/S4f_/ VM   Guacamole HTML5 RDP server Debian10 VM (Docker) HTTP 127.0.0.1:8080/rdp/ VM   RDP Microsoft remote desktop Windows RDP 192.168.208.145:3389 VM    è¦†ç›–å›¾  mermaid.initialize({ \"flowchart\": { \"useMaxWidth\":true }, \"theme\": \"neutral\" } ) graph LR subgraph \"VM (Debian10)\" c1[Nginx]--c2[Guacamole \u0026 SSH] end subgraph \"Windows10\" a1[\"IIS Webserver (WebDav)\"] a2[RDP] end b1[ç”¨æˆ·]--|HTTPS|c1 c1--a1 c2--a2 No Need To Prepare Config File #  More offcial Docs Here\n This Part is for the native build therefore SHOULD BE SKIPPED.1\n As we use docker file here, the default user has been set to guacadmin with password guacadmin.\nOpen Firewall for IIS' Unusual Port #   In Windows\n After binding port 8088 to IIS server\u0026rsquo;s http service, there are addtional steps for unusual port other than 80 and 443. Open firewall advance settings, add allow rules for 8080. In Scope Remote IP address part, add ip range 192.168.208.0 to 192.168.208.255. In Advance Profiles part, check all three checkboxs and confirm.\nInstall Guacamole by Docker #   In Hyper-v (Debian10)\n Docker Site and uploader\u0026rsquo;s Github\n Add those text to a Dockerfile which is used for changing base url.2  1 2 3 4 5  FROMoznu/guacamole:latestRUN set -x \\ \u0026amp;\u0026amp; rm -rf ${CATALINA_HOME}/webapps/ROOT \\ \u0026amp;\u0026amp; mv ${CATALINA_HOME}/webapps/ROOT.war ${CATALINA_HOME}/webapps/rdp.war  Run command at the place where you put the Dockerfile to bulid a new image.  1  docker build -t guapath .   Run the container (replace /root/guacamole with your config directory which should mkdir first when new build) from your new-built image.  1 2 3 4 5  docker run -d \\  --name=win10rdp \\  -p 127.0.0.1:8080:8080 \\  -v /root/guacamole:/config \\  guapath   Nginx URL Rewrite #   In Hyper-v (Debian10)\n Offcial Document\nMy original plan is to use IIS ARR3.0 module to achive the URL rewrite purpose as this IIS webserver also do the job of sharing my files in Lan via Webdav. But after a query online, I find out that the support of Websocket in IIS which Guacamole needed to communicate seems lack. Therefore I use Nginx to do reverse proxy both for Guacamole in Hyper-V and Webdav that host on IIS.3\nAssign IPs to VM 4 #  To get double IPs in debian VM, first you need to add two network interfaces (here for example eth0 is external for Lan and the eth1 is internal to host) on hyper-v. Then login to the VM and add those lines to /etc/network/interfaces, eth1\u0026rsquo;s static ip is different from the host 192.168.208.145 (like one number after) and mask is same as host\u0026rsquo;s (you can find those in Windows Cmd ipconfig /all). This internal ip is related to firewall settings in Windows so you need to assign one manually to access the host Windows:\n1 2 3 4 5 6 7  auto eth0 iface eth0 inet dhcp auto eth1 iface eth1 inet static ip 192.168.208.146 mask 255.255.255.240   Apply changes by systemctl restart networking. Type ip a in command to find your IPs.\n In Windows\n To add static IP in Windows, open Cmd(Administrator) and input:\n1  netsh interface ip set address name=\u0026#34;vEthernet (Default Switch)\u0026#34; static 192.168.208.145 255.255.255.240 none   Add this command to Manage-\u0026gt;Scheduled Tasks-\u0026gt;Create a Basic Task and set it run as administrator to get static ip rather than random one that Windows assign to on startup. Disable only start task when plug in power and add a delay for 30s after startup.\nBy default, Hyper-v will give VM a random Mac which would make your router assign new ip for your VM\u0026rsquo;s external network on boot. Open VM\u0026rsquo;s settings, expand your external Network Adapter and click on Advanced Features. In Mac Address select static and input a Mac address.\nInstall Nginx with Webdav module #   In Hyper-v (Debian10)\n 1  sudo apt-get install nginx-full -y   Remove Default Page\n1  rm /etc/nginx/sites-enabled/default   Add Proxy Config #  Add those lines to your /etc/nginx/nginx.conf file inside the server section. Replace rdp with your guacamole\u0026rsquo;s url path.\n1 2 3 4 5 6 7 8 9 10  location /rdp/ { proxy_redirect off; proxy_buffering off; proxy_http_version 1.1; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection $http_connection; access_log off; proxy_pass http://127.0.0.1:8080/rdp/; }   Replace S4f_ with your IIS Webdav url path, and 192.168.208.145 with your Windows\u0026rsquo;s internal ip. I also changed the query string from client to IIS to fix problems (it\u0026rsquo;s an Nginx bug when reverse proxy a webdav request, especially when use MOVE method, the Destination header would be set as nginx\u0026rsquo;s address rather than IIS' 5) by if set.\nadd in http\n1 2 3 4  map $http_destination $destination { ~*(https?:\\/\\/)([a-z0-9\\.]+\\/)(.+)$ http://192.168.208.145:8088/$3; default $http_destination; }   add in server\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  location /S4f_/ { # allow webdav to max upload 4G  client_max_body_size 4096m; proxy_redirect off; proxy_buffering off; proxy_http_version 1.1; proxy_set_header Destination $destination; # don\u0026#39;t set this header as webdav destination check needed  # proxy_set_header Host $http_host;  proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header http_x_forwarded_for $remote_addr; proxy_set_header remote_addr $remote_addr; access_log off; proxy_pass http://192.168.208.145:8088/S4f_/; }   Config HTTPS and Auth #  About how to generate self-signed certificate, you can refer to Here.\nCopy your server.crt and server.key to nginx/ folder (use scp /path/to/file username@ip.ip.ip.ip:/path/to/destination or Winscp).\nYou can add extra auth for anyone who visit the site by nginx\u0026rsquo;s basic auth6.\nReplace server config with following lines.\n1 2 3 4 5 6 7 8 9 10 11  server { listen 443 ssl http2; server_name localhost; server_tokens off; ssl_certificate server.crt; ssl_certificate_key server.key; ssl_protocols TLSv1.2 TLSv1.3; ssl_prefer_server_ciphers on; ssl_ciphers HIGH:!aNULL:!MD5; add_header Strict-Transport-Security \u0026#34;max-age=31536000; includeSubDomains\u0026#34; always; }   And to disable default nginx index page, add in server:\n1 2 3  location / { return 404; }    As a summary, your nginx.conf file should look like this:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  # Default settings and others http { # Default but remember to delete SSL-related settings  # Because it\u0026#39;s included in server  map $http_destination $destination { # ..  } server { # ...  location / { return 404; } location /rdp/ { # ...  } location /S4f_/ { # ...  } } }   When done, restart your Nginx service:\n1  sudo systemctl restart nginx   Manage Nginx and Guacamole to Autostart #  For Nginx:\n1 2 3 4  # nginx autostart (enable)/ disable (disable) sudo systemctl enable nginx # nginx start/stop/status sudo systemctl start nginx   To check port use lsof -i -P.The Nginx log is in /var/log/nginx/ as access.log and error.log for debug.\n For Guacamole, in /etc/systemd/system/docker-win10rdp.service add:\n1 2 3 4 5 6 7 8 9 10 11 12  [Unit] Description=Docker for win10rdp Requires=docker.service After=docker.service [Service] Restart=always ExecStart=/usr/bin/docker start -a win10rdp ExecStop=/usr/bin/docker stop -t 2 win10rdp [Install] WantedBy=default.target   Enable the service:\n1  sudo systemctl enable docker-win10rdp.service   Edit Guacamole Settings #   In Browser\n Add Account #  Access Guacamole\u0026rsquo;s web page using your VM\u0026rsquo;s external ip address https://192.168.51.118/rdp with guacadmin for both username and password.\nAfter a successfully login, open settings and click on the Users. Create your own account with all permissions checked. Sign in your own account and delete the default guacadmin one.\nAdd Connections #  Click on the New Connection inside the Connections. Fill the Name, Protocol, Hostname (Hyper-v internal ip), Port, Username, Password, Security Mode and check the Ignore server certificate. Save the changes.\n In Hyper-v (Debian10)\n If you want to enhance VM server\u0026rsquo;s security, you can add a ssh connection from docker to host. Use ip a to check docker0 host\u0026rsquo;s ip. Also, change the settings in /etc/ssh/sshd_config by change port and listenAddress. Apply changes sudo systemctl restart sshd:\n1 2 3  Port 25678 # same as docker0 in ip a ListenAddress 172.18.0.1   Also add these command after sudo systemctl edit sshd to allow sshd start when docker0\u0026rsquo;s ready:\n1 2 3 4  [Service] Restart=on-failure RestartSec=3 RestartPreventExitStatus=   Test on Connection #   In Browser\n Back to Home, click on the connection you just added. Check if everything is fine.\nMore Security Stuff #  Expose 3389 to Hyper-v only #   In Windows\n Open firewall advance settings, add two allow rules for TCP and UDP port3389. In Scope Remote IP address part, add ip range 192.168.208.0 to 192.168.208.255. In Advance Profiles part, check all three checkboxs and confirm. Disable old TCP and UDP port 3389 allow rules.\nFail x00/x03 to Ban #   In Hyper-v (Debian10)\n Install fail2ban\n1  sudo apt-get install fail2ban   Edit your config file from template\n1 2  sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local sudo nano /etc/fail2ban/jail.local   Add your client ip to ignoreip\n1 2 3  [DEFAULT] # ... ignoreip = 127.0.0.1/8 ::1 your-ip-address-here   Modify default bantime, findtime and maxretry\n1 2 3 4 5 6 7 8 9  # \u0026#34;bantime\u0026#34; is the number of seconds that a host is banned. bantime = 48h # -1 means permanant # A host is banned if it has generated \u0026#34;maxretry\u0026#34; during the last \u0026#34;findtime\u0026#34;  # seconds. findtime = 10m # \u0026#34;maxretry\u0026#34; is the number of failures before a host get banned. maxretry = 10   Create your special jail in jail.local\n1 2 3 4 5  [nginx-x0x] enabled = true port = http,https filter = nginx-x0x logpath = /var/log/nginx/access.log   Create filter for Nginx x0x (like 403) error\n1  sudo nano /etc/fail2ban/filter.d/nginx-x0x.conf   Add\n1 2 3  [Definition] failregex = ^\u0026lt;HOST\u0026gt;.*\u0026#34;(GET|POST|HEAD).*\u0026#34; (404|444|403|400) .*$ ignoreregex =   You can test your regex here\n1  fail2ban-regex /var/log/nginx/access.log /etc/fail2ban/filter.d/nginx-x0x.conf   Restart fail2ban\n1  sudo systemctl restart fail2ban   To see status\n1  sudo fail2ban-client status nginx-x0x   To rescue from jail\n1  sudo fail2ban-client set nginx-x0x unbanip \u0026lt;ip\u0026gt;   APPENDIX #     Deprecated\nChanging the config of Guacamole is now in its GUI control panel instead of in its config file.\n First, prepare the config file that will be used by guacamole.\nReplace 192.168.208.145 with your Windows IP address or Hostname (not recommend) connected to the Hyper-v (as 192.168.208.146 is the VM\u0026rsquo;s IP that Hyper-v assigned to). Also don\u0026rsquo;t forget to change the username and password (md5).\nIn Debian, you can use md5sum \u0026lt;File contains PASSWORD\u0026gt; to hash your plain password.\n/root/guacamole/user-mapping.xml\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  \u0026lt;user-mapping\u0026gt; \u0026lt;!-- Per-user authentication and config information \u0026lt;authorize username=\u0026#34;USERNAME\u0026#34; password=\u0026#34;PASSWORD\u0026#34;\u0026gt; \u0026lt;protocol\u0026gt;vnc\u0026lt;/protocol\u0026gt; \u0026lt;param name=\u0026#34;hostname\u0026#34;\u0026gt;localhost\u0026lt;/param\u0026gt; \u0026lt;param name=\u0026#34;port\u0026#34;\u0026gt;5900\u0026lt;/param\u0026gt; \u0026lt;param name=\u0026#34;password\u0026#34;\u0026gt;VNCPASS\u0026lt;/param\u0026gt; \u0026lt;/authorize\u0026gt; --\u0026gt; \u0026lt;!-- Another user, but using md5 to hash the password (example below uses the md5 hash of \u0026#34;PASSWORD\u0026#34;) --\u0026gt; \u0026lt;authorize username=\u0026#34;admin\u0026#34; password=\u0026#34;**PASSWORD CONVERT TO MD5**\u0026#34; encoding=\u0026#34;md5\u0026#34;\u0026gt; \u0026lt;connection name=\u0026#34;Unique Name\u0026#34;\u0026gt; \u0026lt;protocol\u0026gt;rdp\u0026lt;/protocol\u0026gt; \u0026lt;param name=\u0026#34;hostname\u0026#34;\u0026gt;192.168.208.145\u0026lt;/param\u0026gt; \u0026lt;param name=\u0026#34;port\u0026#34;\u0026gt;3389\u0026lt;/param\u0026gt; \u0026lt;/connection\u0026gt; \u0026lt;/authorize\u0026gt; \u0026lt;/user-mapping\u0026gt;    \u0026#x21a9;\u0026#xfe0e;  Failed\nFailed on COPY root /.\n (This file is originated from oznu/guacamole, however the path in curl -SLo ${CATALINA_HOME}/webapps/ROOT.war has been changed to ${CATALINA_HOME}/webapps/rdp.war which is same to https://.../rdp).\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79  FROMlibrary/tomcat:9-jre11ENV ARCH=amd64 \\ GUAC_VER=1.2.0 \\ GUACAMOLE_HOME=/app/guacamole \\ PG_MAJOR=9.6 \\ PGDATA=/config/postgres \\ POSTGRES_USER=guacamole \\ POSTGRES_DB=guacamole_db# Apply the s6-overlayRUN curl -SLO \u0026#34;https://github.com/just-containers/s6-overlay/releases/download/v1.20.0.0/s6-overlay-${ARCH}.tar.gz\u0026#34; \\ \u0026amp;\u0026amp; tar -xzf s6-overlay-${ARCH}.tar.gz -C / \\ \u0026amp;\u0026amp; tar -xzf s6-overlay-${ARCH}.tar.gz -C /usr ./bin \\ \u0026amp;\u0026amp; rm -rf s6-overlay-${ARCH}.tar.gz \\ \u0026amp;\u0026amp; mkdir -p ${GUACAMOLE_HOME} \\  ${GUACAMOLE_HOME}/lib \\  ${GUACAMOLE_HOME}/extensionsWORKDIR${GUACAMOLE_HOME}# Install dependenciesRUN apt-get update \u0026amp;\u0026amp; apt-get install -y \\  libcairo2-dev libjpeg62-turbo-dev libpng-dev \\  libossp-uuid-dev libavcodec-dev libavutil-dev \\  libswscale-dev freerdp2-dev libfreerdp-client2-2 libpango1.0-dev \\  libssh2-1-dev libtelnet-dev libvncserver-dev \\  libpulse-dev libssl-dev libvorbis-dev libwebp-dev libwebsockets-dev \\  ghostscript postgresql-${PG_MAJOR} \\ \u0026amp;\u0026amp; rm -rf /var/lib/apt/lists/*# Link FreeRDP to where guac expects it to beRUN [ \u0026#34;$ARCH\u0026#34; = \u0026#34;armhf\u0026#34; ] \u0026amp;\u0026amp; ln -s /usr/local/lib/freerdp /usr/lib/arm-linux-gnueabihf/freerdp || exit 0RUN [ \u0026#34;$ARCH\u0026#34; = \u0026#34;amd64\u0026#34; ] \u0026amp;\u0026amp; ln -s /usr/local/lib/freerdp /usr/lib/x86_64-linux-gnu/freerdp || exit 0# Install guacamole-serverRUN curl -SLO \u0026#34;http://apache.org/dyn/closer.cgi?action=download\u0026amp;filename=guacamole/${GUAC_VER}/source/guacamole-server-${GUAC_VER}.tar.gz\u0026#34; \\ \u0026amp;\u0026amp; tar -xzf guacamole-server-${GUAC_VER}.tar.gz \\ \u0026amp;\u0026amp; cd guacamole-server-${GUAC_VER} \\ \u0026amp;\u0026amp; ./configure \\ \u0026amp;\u0026amp; make -j$(getconf _NPROCESSORS_ONLN) \\ \u0026amp;\u0026amp; make install \\ \u0026amp;\u0026amp; cd .. \\ \u0026amp;\u0026amp; rm -rf guacamole-server-${GUAC_VER}.tar.gz guacamole-server-${GUAC_VER} \\ \u0026amp;\u0026amp; ldconfig# Install guacamole-client and postgres auth adapterRUN set -x \\ \u0026amp;\u0026amp; rm -rf ${CATALINA_HOME}/webapps/ROOT \\ \u0026amp;\u0026amp; curl -SLo ${CATALINA_HOME}/webapps/rdp.war \u0026#34;http://apache.org/dyn/closer.cgi?action=download\u0026amp;filename=guacamole/${GUAC_VER}/binary/guacamole-${GUAC_VER}.war\u0026#34; \\ \u0026amp;\u0026amp; curl -SLo ${GUACAMOLE_HOME}/lib/postgresql-42.1.4.jar \u0026#34;https://jdbc.postgresql.org/download/postgresql-42.1.4.jar\u0026#34; \\ \u0026amp;\u0026amp; curl -SLO \u0026#34;http://apache.org/dyn/closer.cgi?action=download\u0026amp;filename=guacamole/${GUAC_VER}/binary/guacamole-auth-jdbc-${GUAC_VER}.tar.gz\u0026#34; \\ \u0026amp;\u0026amp; tar -xzf guacamole-auth-jdbc-${GUAC_VER}.tar.gz \\ \u0026amp;\u0026amp; cp -R guacamole-auth-jdbc-${GUAC_VER}/postgresql/guacamole-auth-jdbc-postgresql-${GUAC_VER}.jar ${GUACAMOLE_HOME}/extensions/ \\ \u0026amp;\u0026amp; cp -R guacamole-auth-jdbc-${GUAC_VER}/postgresql/schema ${GUACAMOLE_HOME}/ \\ \u0026amp;\u0026amp; rm -rf guacamole-auth-jdbc-${GUAC_VER} guacamole-auth-jdbc-${GUAC_VER}.tar.gz# Add optional extensionsRUN set -xe \\ \u0026amp;\u0026amp; mkdir ${GUACAMOLE_HOME}/extensions-available \\ \u0026amp;\u0026amp; for i in auth-ldap auth-duo auth-header auth-cas auth-openid auth-quickconnect auth-totp; do \\  echo \u0026#34;http://apache.org/dyn/closer.cgi?action=download\u0026amp;filename=guacamole/${GUAC_VER}/binary/guacamole-${i}-${GUAC_VER}.tar.gz\u0026#34; \\  \u0026amp;\u0026amp; curl -SLO \u0026#34;http://apache.org/dyn/closer.cgi?action=download\u0026amp;filename=guacamole/${GUAC_VER}/binary/guacamole-${i}-${GUAC_VER}.tar.gz\u0026#34; \\  \u0026amp;\u0026amp; tar -xzf guacamole-${i}-${GUAC_VER}.tar.gz \\  \u0026amp;\u0026amp; cp guacamole-${i}-${GUAC_VER}/guacamole-${i}-${GUAC_VER}.jar ${GUACAMOLE_HOME}/extensions-available/ \\  \u0026amp;\u0026amp; rm -rf guacamole-${i}-${GUAC_VER} guacamole-${i}-${GUAC_VER}.tar.gz \\ ;doneENV PATH=/usr/lib/postgresql/${PG_MAJOR}/bin:$PATHENV GUACAMOLE_HOME=/config/guacamoleWORKDIR/configCOPY root /EXPOSE8080ENTRYPOINT [ \u0026#34;/init\u0026#34; ]   \u0026#x21a9;\u0026#xfe0e;  Deprecated\nUse nginx reverse proxy instead because ARR\u0026rsquo;s lack of Websocket support.\n Install Application Request Routing (ARR) Module\nInstall ARR 3.0 for Reverse Proxy support. You can install the ARR module directly from the location: http://www.microsoft.com/web/gallery/install.aspx?appid=ARRv3_0.\nChange URL Rewrite Settings\nOpen the IIS Manager and open the Default Web Site config pannel. Then double click on the URL Rewrite option.\nAdd 2 rules for Inbound rules and another one for Outbound Rules by clicking on the Add Rule(s)... action and Choose the Blank Rule template. Contents that needed to be changed are in the following tables:\nInbound Rules\nThe first line of the table prevent address /S4f_/ (another web app that hosted on the IIS server) to be rewritten to the rdp sevice. Also need to check the Append query string checkbox.\n   Name Input Match Pattern Action Type Action URL Stop Processing     S4f - match S4f_(/?)(.*) Rewrite {R:0} True   rdp - match rdp(/?)(.*) Rewrite http://172.17.111.38:8080/{R:0} True    \u0026#x21a9;\u0026#xfe0e;  Deprecated\nThe hostname that Hyper-v provided is not stable. It\u0026rsquo;s better set static ip both manually.\n The old host-accessed-by-hostname (HOSTNAME.mshome.net) plan isn\u0026rsquo;t unstable enough than assigning static ip to both host 192.168.208.145 and VM 192.168.208.146. \u0026#x21a9;\u0026#xfe0e;\n  Important\nThere is a bug when Nginx handle reverse proxy to a webdav server. Related discussion and webdav path requirement.\n In Nginx\u0026rsquo;s reverse proxy part S4f_, I add extra filter to change query uri for webdav service. I\u0026rsquo;m using rclone as my Webdav client~~, however, it contains bugs while sending requests to a proxyed server~~. For example, rclone sends webdav method MOVE and query uri https://\u0026lt;nginx\u0026gt;/S4f_/path/to/file to the server to rename a file while the correct query uri without proxy is http://\u0026lt;IIS\u0026gt;/S4f_/path/to/file. ~~Therefore, to fix the problem, I add extra if-statement and regex set to convert path that contains scheme and server name to relative path.~~\n**Edit1:** It seems that it\u0026rsquo;s a common problem when use Nginx as reverse proxy and not just the bug of rclone. More information about this is in description above. The Webdav server will check the Destination header in query uri if it match the internal server.\n**Edit2:** Because of RFC2518, Destination header should be absolute URI. Convert it to relative is not the solution. The better way is to rewrite the scheme and path to match the internal communication when proxy to IIS backend.\n**Edit3:** if-state in Nginx will double escape() the query string (like convert already converted string %6E to %256E). So I use map (**should be placed in http section**) instead. For some reason, IIS Webdav server behind proxy will check if MOVE method\u0026rsquo;s query string Destination is match the proxyed Host. To avoid error, delete or comment the proxy_set_header host $http_host in location /S4f_/ {..}. \u0026#x21a9;\u0026#xfe0e;\n  Optional\nSet basic auth for Nginx.\n Generate your conf/userpass.txt file by command htpasswd or online MD5 htpasswd generator. Text inside are like share:$apr1$AOW5qtOx$7D3rsVK/jIQuQYqd11/Xg0. Add those lines in your nginx.conf server section.\n1 2  auth_basic \u0026#34;Auth\u0026#34;; auth_basic_user_file userpass.txt;    \u0026#x21a9;\u0026#xfe0e;   "});index.add({'id':5,'href':'/documents/github-ssh-git-push/','title':"å¦‚ä½•å®ç° Github å…å¯†ç  git push å†…å®¹",'section':"å¼‚æ„",'content':" Contents from Github Help.\n Generating a new SSH key #   Open Git Bash. Paste the text below, substituting in your GitHub email address.  1  $ ssh-keygen -t rsa -b 4096 -C \u0026#34;your_email@example.com\u0026#34;   This creates a new ssh key, using the provided email as a label.\n1  \u0026gt; Generating public/private rsa key pair.   When you\u0026rsquo;re prompted to \u0026ldquo;Enter a file in which to save the key,\u0026rdquo; press Enter. This accepts the default file location.  1  \u0026gt; Enter a file in which to save the key (/c/Users/you/.ssh/id_rsa):[Press enter]   At the prompt, type a secure passphrase. For more information, see \u0026ldquo;Working with SSH key passphrases\u0026rdquo;.\n1 2  \u0026gt; Enter passphrase (empty for no passphrase): [Type a passphrase] \u0026gt; Enter same passphrase again: [Type passphrase again]   Adding your SSH key to the ssh-agent #  Before adding a new SSH key to the ssh-agent to manage your keys, you should have checked for existing SSH keys and generated a new SSH key.\nIf you have GitHub Desktop installed, you can use it to clone repositories and not deal with SSH keys. It also comes with the Git Bash tool, which is the preferred way of running git commands on Windows.\n Ensure the ssh-agent is running:   If you are using the Git Shell that\u0026rsquo;s installed with GitHub Desktop, the ssh-agent should be running. If you are using another terminal prompt, such as Git for Windows, you can use the \u0026ldquo;Auto-launching the ssh-agent\u0026rdquo; instructions in \u0026ldquo;Working with SSH key passphrases\u0026rdquo;, or start it manually:  1 2 3  # start the ssh-agent in the background $ eval $(ssh-agent -s) \u0026gt; Agent pid 59566   Add your SSH private key to the ssh-agent. If you created your key with a different name, or if you are adding an existing key that has a different name, replace id_rsa in the command with the name of your private key file.  1  $ ssh-add ~/.ssh/id_rsa   Add the SSH key to your GitHub account #   Copy the SSH key to your clipboard.  If your SSH key file has a different name than the example code, modify the filename to match your current setup. When copying your key, don\u0026rsquo;t add any newlines or whitespace.\n1 2  $ clip \u0026lt; ~/.ssh/id_rsa.pub # Copies the contents of the id_rsa.pub file to your clipboard    Tip: If clip isn\u0026rsquo;t working, you can locate the hidden .ssh folder, open the file in your favorite text editor, and copy it to your clipboard.\n  In the upper-right corner of any page, click your profile photo, then click Settings.\n  In the user settings sidebar, click SSH and GPG keys.\n  Click New SSH key or Add SSH key.\n  In the \u0026ldquo;Title\u0026rdquo; field, add a descriptive label for the new key. For example, if you\u0026rsquo;re using a personal Mac, you might call this key \u0026ldquo;Personal MacBook Air\u0026rdquo;.\n  Paste your key into the \u0026ldquo;Key\u0026rdquo; field.\n  Click Add SSH key.\n  If prompted, confirm your GitHub password.\n  "});index.add({'id':6,'href':'/documents/markdown-cheatsheet/','title':"Markdown è¯­æ³•é€Ÿæˆ",'section':"å¼‚æ„",'content':" This document is originated from markdownguide, converted from html to markdown by aspose, and fix format by myself.\n Get Started\nCheat Sheet\nBasic Syntax\nExtended Syntax\nTools\nBook\nMarkdown Cheat Sheet #  A quick reference to the Markdown syntax.\nOverview #  This Markdown cheat sheet provides a quick overview of all the Markdown syntax elements. It canâ€™t cover every edge case, so if you need more information about any of these elements, refer to our reference guides for basic syntax and extended syntax.\nBasic Syntax #  These are the elements outlined in John Gruberâ€™s original design document. All Markdown applications support these elements.\n   Element Markdown Syntax Render     Heading # H1     ## H2     ### H3    Bold **bold text** bold text   Italic *italicized text* italicized text   Blockquote \u0026gt; blockquote    Ordered List 1. First item     1. Second item     1. Third item    Unordered List - First item     - Second item     - Third item    Code ` code ` code   Horizontal Rule --- \u0026mdash;   Link [title](https://www.example.com) title   Image ![alt text](image.jpg)     Extended Syntax #  These elements extend the basic syntax by adding additional features. Not all Markdown applications support these elements.\n   Element Markdown Syntax     Table | Syntax | Description |    | \u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash; | \u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash; |    | Header | Title |    | Paragraph | Text |   Fenced Code Block ` ` `    {    Â \u0026ldquo;firstName\u0026rdquo;: \u0026ldquo;John\u0026rdquo;,    Â \u0026ldquo;lastName\u0026rdquo;: \u0026ldquo;Smith\u0026rdquo;,    Â \u0026ldquo;age\u0026rdquo;: 25    }    ` ` `   Footnote Here\u0026rsquo;s a sentence with a footnote. [^1]    [^1]: This is the footnote.   Heading ID ### My Great Heading {#custom-id}   Definition List term    : definition   Strikethrough \t~~The world is flat.~~   Task List - [x] Write the press release    - [ ] Update the website    - [ ] Contact the media    "});index.add({'id':7,'href':'/documents/front-matter-of-hugo/','title':"Hugo æ–‡ç« å‰ç½®æ ‡ç­¾è¯­æ³•",'section':"å¼‚æ„",'content':" An copy of Hugo Front Matter Document\n Hugo supports four formats for front matter, each with their own identifying tokens.\nTOML #  identified by opening and closing +++.\nYAML #  identified by opening and closing \u0026mdash;.\nJSON #  a single JSON object surrounded by â€˜{â€™ and â€˜}â€™, followed by a new line.\nORG #  a group of Org mode keywords in the format â€˜#+KEY: VALUEâ€™. Any line that does not start with #+ ends the front matter section. Keyword values can be either strings (#+KEY: VALUE) or a whitespace separated list of strings (#+KEY[]: VALUE_1 VALUE_2).\nIn Hugo I just use YAML as my markdown files' front matter\n1 2 3 4 5 6 7 8 9 10 11 12 13  categories:- Development- VIMdate:\u0026#34;2012-04-06\u0026#34;description:spf13-vim is a cross platform distribution of vim plugins and resourcesfor Vim.slug:spf13-vim-3-0-release-and-new-websitetags:- .vimrc- plugins- spf13-vim- vimtitle:spf13-vim 3.0 release and new website  Front Matter Variables #  Predefined #  There are a few predefined variables that Hugo is aware of. See Page Variables for how to call many of these predefined variables in your templates.\naliases #  an array of one or more aliases (e.g., old published paths of renamed content) that will be created in the output directory structure . See Aliases for details.\naudio #  an array of paths to audio files related to the page; used by the opengraph internal template to populate og:audio.\ncascade #  a map of Front Matter keys whose values are passed down to the pageâ€™s descendents unless overwritten by self or a closer ancestorâ€™s cascade. See Front Matter Cascade for details.\ndate #  the datetime assigned to this page. This is usually fetched from the date field in front matter, but this behaviour is configurable.\ndescription #  the description for the content.\ndraft #  if true, the content will not be rendered unless the --buildDrafts flag is passed to the hugo command.\nexpiryDate #  the datetime at which the content should no longer be published by Hugo; expired content will not be rendered unless the --buildExpired flag is passed to the hugo command.\nheadless #  if true, sets a leaf bundle to be headless.\nimages #  an array of paths to images related to the page; used by internal templates such as _internal/twitter_cards.html.\nisCJKLanguage #  if true, Hugo will explicitly treat the content as a CJK language; both .Summary and .WordCount work properly in CJK languages.\nkeywords #  the meta keywords for the content.\nlayout #  the layout Hugo should select from the lookup order when rendering the content. If a type is not specified in the front matter, Hugo will look for the layout of the same name in the layout directory that corresponds with a contentâ€™s section. See â€œDefining a Content Typeâ€\nlastmod #  the datetime at which the content was last modified.\nlinkTitle #  used for creating links to content; if set, Hugo defaults to using the linktitle before the title. Hugo can also order lists of content by linktitle.\nmarkup #  experimental; specify \u0026quot;rst\u0026quot; for reStructuredText (requires rst2html) or \u0026quot;md\u0026quot; (default) for Markdown.\noutputs #  allows you to specify output formats specific to the content. See output formats.\npublishDate #  if in the future, content will not be rendered unless the --buildFuture flag is passed to hugo.\nresources #  used for configuring page bundle resources. See Page Resources.\nseries #  an array of series this page belongs to, as a subset of the series taxonomy; used by the opengraph internal template to populate og:see_also.\nslug #  appears as the tail of the output URL. A value specified in front matter will override the segment of the URL based on the filename.\nsummary #  text used when providing a summary of the article in the .Summary page variable; details available in the content-summaries section.\ntitle #  the title for the content.\ntype #  the type of the content; this value will be automatically derived from the directory (i.e., the section) if not specified in front matter.\nurl #  the full path to the content from the web root. It makes no assumptions about the path of the content file. It also ignores any language prefixes of the multilingual feature.\nvideos #  an array of paths to videos related to the page; used by the opengraph internal template to populate og:video.\nweight #  used for ordering your content in lists. Lower weight gets higher precedence. So content with lower weight will come first. If set, weights should be non-zero, as 0 is interpreted as an unset weight.\n\u0026lt;taxonomies\u0026gt; #  field name of the plural form of the index. See tags and categories in the above front matter examples. Note that the plural form of user-defined taxonomies cannot be the same as any of the predefined front matter variables.\n If neither slug nor url is present and permalinks are not configured otherwise in your site config file, Hugo will use the filename of your content to create the output URL. See Content Organization for an explanation of paths in Hugo and URL Management for ways to customize Hugoâ€™s default behaviors.\n User-Defined #  You can add fields to your front matter arbitrarily to meet your needs. These user-defined key-values are placed into a single .Params variable for use in your templates.\nThe following fields can be accessed via .Params.include_toc and .Params.show_comments, respectively. The Variables section provides more information on using Hugoâ€™s page- and site-level variables in your templates.\n1 2  include_toc:trueshow_comments:false  Front Matter Cascade #  Any node or section can pass down to descendents a set of Front Matter values as long as defined underneath the reserved cascade Front Matter key.\nExample In content/blog/_index.md\n1 2 3  cascade:banner:images/typewriter.jpgtitle:Blog  With the above example the Blog section page and its descendents will return images/typewriter.jpg when .Params.banner is invoked unless:\n Said descendent has its own banner value set Or a closer ancestor node has its own cascade.banner value set.  click here to continue read on original page #  Order Content Through Front Matter\nOverride Global Markdown Configuration\nFront Matter Format Specs\nSee Also\n Archetypes Data Templates Code Toggle Configure Hugo Taxonomies  "});index.add({'id':8,'href':'/posts/my-first-post/','title':"é€šç”¨ Markdown \u0026 Shortcode æµ‹è¯•é¡µé¢",'section':"èƒŒæ™¯è¾å°„",'content':" Used for test\nMay contains bugs\nabout\n 1ï¸âƒ£ğŸ˜„\nEmoji Cheetsheet\nWhen $a \\ne 0$, there are two solutions to (ax^2 + bx + c = 0) and they are $$x = {-b \\pm \\sqrt{b^2-4ac} \\over 2a}.$$\nInternal params (like .Summary) WILL CAUSE SUMMARY ERROR #  1  A bunch of code here    render of `code` bug: ` code `\nrender of **\\`code\\`** bug: \\` code \\`  Note that table should inside empty lines\n  \u0026lt;Empty\u0026gt;\n   1 2     fail -   \u0026lt;Empty\u0026gt;         1 2     fail -    Usage #   tags  git github ssh markdown cheetsheet tutorial   categories  test archive undone finished   section basic type of an post, shows usage of a post, like:  document collect of documents posts default section    ** Memain Online Editor**\nTo change color: \u0026lsquo;default\u0026rsquo;, \u0026lsquo;forest\u0026rsquo;, \u0026lsquo;dark\u0026rsquo;, \u0026lsquo;neutral\u0026rsquo;\n mermaid.initialize({ \"flowchart\": { \"useMaxWidth\":true }, \"theme\": \"neutral\" } ) graph LR; A[Hard edge] --|Link text| B(Round edge) B -- C{Decision} C --|One| D[Result one] C --|Two| E[Result two] graph LR; A[Hard edge] --\u0026gt;|Link text| B(Round edge) B --\u0026gt; C{Decision} C --\u0026gt;|One| D[Result one] C --\u0026gt;|Two| E[Result two] This document is originated from markdownguide, converted from html to markdown by aspose, and fix format by myself. Get Started Cheat Sheet Basic Syntax Extended Syntax Tools Book Markdown Cheat 2020-07-01 "});})();