<!doctype html><html lang=zh><head><meta name=generator content="Hugo 0.80.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="简介：这篇文章主要是为了记录我在切换Hugo主题的过程中，所需要做的将部分在旧主题Diary的修改也同步更新到新主题Hu"><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="切换博客主题 & 阶段性整理原有主题修改"><meta property="og:description" content="简介：这篇文章主要是为了记录我在切换Hugo主题的过程中，所需要做的将部分在旧主题Diary的修改也同步更新到新主题Hu"><meta property="og:type" content="article"><meta property="og:url" content="https://wmillers.github.io/posts/blog-change-theme-record/"><meta property="article:published_time" content="2021-01-03T08:03:23+08:00"><meta property="article:modified_time" content="2021-01-10T15:25:35+08:00"><title>切换博客主题 & 阶段性整理原有主题修改 | 源</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.947bf120c3867937f708b4b83fcf77d34b3b2af07767424524166a5d9602b9b8.css integrity="sha256-lHvxIMOGeTf3CLS4P89300s7KvB3Z0JFJBZqXZYCubg="><script defer src=/zh.search.min.a77abd9e346bff49ea05e3cff2c2a6ce528e0b4f7697abba67c5c89e8e285665.js integrity="sha256-p3q9njRr/0nqBePP8sKmzlKOC092l6u6Z8XIno4oVmU="></script><script defer src=/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js integrity="sha256-dKi7B/C+6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script><script src=/vendor/js/creadcss.min.js></script><script src=/mindmap/jquery.min.js></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex" style=margin:0><aside class=book-menu><nav style=color:#555><h2 class=book-brand><a href=/><b style=font-family:simsun,serif;font-size:3.25rem;color:var(--body-font-color)>源</b></a><div style="font-size:1.25rem;padding:1rem 0">月背之后的荧惑</div></h2><div class=book-search><input type=text id=book-search-input placeholder=搜索 aria-label=搜索 maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li style=color:var(--body-font-color)><a href=https://wmillers.github.io/documents/github-ssh-git-push/>如何实现 Github 免密码 git push 内容</a></li><li style=color:var(--body-font-color)><a href=https://wmillers.github.io/documents/markdown-cheatsheet/>Markdown 语法速成</a></li><li style=color:var(--body-font-color)><a href=https://wmillers.github.io/documents/front-matter-of-hugo/>Hugo 文章前置标签语法</a></li></ul><small style=position:absolute;margin-top:2rem>共 5 篇文章 ⋅ 7044 字<p>Copyright © 2020<a href=https://github.com/wmillers target=_blank> wmillers</a></p><a rel=license href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank><img alt=知识共享许可协议 src=/by-nc-sa.svg></a><p>Powered by <a href=https://gohugo.io/ target=_blank>Hugo</a> ⋅ Theme <a href=https://github.com/alex-shpak/hugo-book target=_blank>Book</a> 魔改</p></small></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>切换博客主题 & 阶段性整理原有主题修改</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#changes-comparasion-in-these-two-themes>Changes comparasion in these two themes</a><ul><li><a href=#old-changes-i-made-in-diary-theme>Old changes I made in <code>Diary</code> theme</a></li><li><a href=#new-functionality-in-book-theme>New functionality in <code>Book</code> theme</a></li></ul></li><li><a href=#todo-list-in-book-theme>TODO List in <code>Book</code> theme</a></li></ul></nav></aside></header><article class=markdown><h1><b><a href=/posts/blog-change-theme-record/>切换博客主题 & 阶段性整理原有主题修改</a></b></h1><div style=color:#999><small>2021-1-3
<span itemprop=wordCount>打字机
866
,</span>
<span itemprop=timeRequired>穿越2分钟</span></small>
<small>/
<a href=/categories/undone/>undone</a></small>
<small>/
<a href=/tags/tutorial/>tutorial</a>,
<a href=/tags/record/>record</a>,
<a href=/tags/theme/>theme</a>,
<a href=/tags/hugo/>hugo</a></small></div><p><blockquote><p>简介：这篇文章主要是为了记录我在切换<code>Hugo</code>主题的过程中，所需要做的将部分在旧主题<a href=//themes.gohugo.io/hugo-theme-diary/><code>Diary</code></a>的修改也同步更新到新主题<a href=https://themes.gohugo.io//theme/hugo-book><code>Hugo-book</code></a>中。原计划里，新主题是<a href=//themes.gohugo.io/hugo-theme-learn/><code>Learn</code></a>，所以在前几次commit里写的新主题名称和这次更新以后commit里不一致。<br>此外，这篇文章还包括了新主题比旧主题多拥有的功能，以及我对比其他博客后准备在新主题中额外添加的功能。</p></blockquote><table><thead><tr><th>Process Name</th><th>Record(Done?)</th></tr></thead><tbody><tr><td>Switch theme start</td><td>2021.01.03</td></tr><tr><td>Review old changes</td><td>Y</td></tr><tr><td>More customize</td><td>？</td></tr></tbody></table><h2 id=changes-comparasion-in-these-two-themes>Changes comparasion in these two themes
<a class=anchor href=#changes-comparasion-in-these-two-themes>#</a></h2><h3 id=old-changes-i-made-in-diary-theme>Old changes I made in <code>Diary</code> theme
<a class=anchor href=#old-changes-i-made-in-diary-theme>#</a></h3><table><thead><tr><th>File Name</th><th>Place (<code>.</code> point to <code>themes/diary/</code>)</th><th>Usage</th><th>Need to add?</th><th>Done?</th></tr></thead><tbody><tr><td>PreventSteal.js</td><td>In ./layouts/partial/head.html as &lt;script></td><td>Jump back to my site &lt;script src="{{"/vendor/js/creadcss.min.js" | relURL}}" >&lt;/script></td><td>Yes</td><td>Y</td></tr><tr><td>.git/</td><td>./</td><td>Delete to prevent submodule problem</td><td>Yes</td><td>Y</td></tr><tr><td>config.toml</td><td>&lt;home></td><td>add CC BY-NC-SA 4.0</td><td>-</td><td>-</td></tr><tr><td>copyright.html</td><td>./layouts/partials/</td><td></td><td>Maybe</td><td>Y</td></tr><tr><td>tagCloud.html</td><td>In /layouts/partials/extrabar.html</td><td>Need to rewrite</td><td>No</td><td>-</td></tr><tr><td>404.html</td><td>./layouts/</td><td>&lt;a href="/">404&lt;/a></td><td>-</td><td>-</td></tr></tbody></table><h3 id=new-functionality-in-book-theme>New functionality in <code>Book</code> theme
<a class=anchor href=#new-functionality-in-book-theme>#</a></h3><p><strong>Mermaid</strong> <a href=https://mermaid-js.github.io/mermaid-live-editor/#/>Online Editor</a><br>Meta info for <strong>Card</strong>-Showing in other <strong>share</strong> by <a href=https://wocai.de/post/2020/02/%E5%9C%A8-hugo-%E4%B8%AD%E4%BD%BF%E7%94%A8-open-graph-%E6%8F%90%E5%8D%87%E5%88%86%E4%BA%AB%E6%95%88%E6%9E%9C/>Open Graph</a><br><strong>Buttons</strong><br><a href=https://github.com/alex-shpak/hugo-book target=_blank class=book-btn>Contribute</a>
<strong>Columns</strong><br><div class="book-columns flex flex-wrap"><div class="flex-even markdown-inner"><h1 id=left-content>Left Content</h1><p>Lorem markdownum insigne&mldr;</div><div class="flex-even markdown-inner"><h1 id=mid-content>Mid Content</h1><p>Lorem markdownum insigne&mldr;</div><div class="flex-even markdown-inner"><h1 id=right-content>Right Content</h1><p>Lorem markdownum insigne&mldr;</div></div><strong>Details</strong><br><details open><summary>Title</summary><div class=markdown-inner><h2 id=markdown-content>Markdown content</h2><p>Lorem markdownum insigne&mldr;</div></details><strong>Hints</strong><br><blockquote class="book-hint danger"><strong>Markdown content</strong><br>[info|warning|danger]</blockquote><strong>Katex</strong><br><link rel=stylesheet href=/katex/katex.min.css><script defer src=/katex/katex.min.js></script><script defer src=/katex/auto-render.min.js onload=renderMathInElement(document.body);></script><span>\(f(x) = \int_{-\infty}^\infty\hat f(\xi)\,e^{2 \pi i \xi x}\,d\xi\)</span>
<strong>Tabs</strong><br><div class=book-tabs><input type=radio class=toggle name=tabs-uniqueid id=tabs-uniqueid-0 checked>
<label for=tabs-uniqueid-0>MacOS</label><div class="book-tabs-content markdown-inner"><h1 id=macos-content>MacOS Content</h1></div><input type=radio class=toggle name=tabs-uniqueid id=tabs-uniqueid-1>
<label for=tabs-uniqueid-1>Linux</label><div class="book-tabs-content markdown-inner"><h1 id=linux-content>Linux Content</h1></div><input type=radio class=toggle name=tabs-uniqueid id=tabs-uniqueid-2>
<label for=tabs-uniqueid-2>Windows</label><div class="book-tabs-content markdown-inner"><h1 id=windows-content>Windows Content</h1></div></div></p><h2 id=todo-list-in-book-theme>TODO List in <code>Book</code> theme
<a class=anchor href=#todo-list-in-book-theme>#</a></h2><ul><li><p><input checked disabled type=checkbox> 主字体从Roboto改为PingFang SC 苹方</p></li><li><p><input checked disabled type=checkbox> 支持二维码 qrious</p></li><li><p><input checked disabled type=checkbox> Chinese Date Format<br><code>BookDateFormat</code></p></li><li><p><input checked disabled type=checkbox> Find a online CMS article editor for <strong>Chinese</strong> input-in-browser support (input method in vscode in crostini is broken)<br><strong>Using Chrome Offline App (Minimalist Makrdown Editor)</strong></p></li><li><p><input checked disabled type=checkbox> Comments support<br><strong>Using <a href=https://valine.js.org/>valine</a> and <a href=https://console.leancloud.app/>Leancloud</a>, refer to <a href=https://www.smslit.top/2018/07/08/hugo-valine/>smslit</a> and <a href=https://wocai.de/post/2018/11/%E7%BB%99hugo-blog%E4%B8%AD%E5%A2%9E%E5%8A%A0%E4%B8%80%E4%BA%9B%E6%8F%92%E4%BB%B6/>kokdemo</a></strong></p></li><li><p><input checked disabled type=checkbox> Usable <strong>Img</strong> uploader <a href=https://github.com/Molunerfinn/PicGo>PicGo</a> with plugin <a href=https://github.com/JuZiSang/picgo-plugin-compress>picgo-plugin-compress</a> by <a href=https://tinify.com/dashboard/api>TinyPNG</a> api to host Github<br><del><strong>注意</strong>：因为picgo插件市场是基于npm的，所以内置搜索页因为网络不能使用，需要先手动安装npm，再在<a href=https://picgo.github.io/PicGo-Core-Doc/zh/dev-guide/deploy.html#gui%E6%8F%92%E4%BB%B6>picgo配置目录</a>下手动<code>npm install picgo-xxx --registry=ht tps://registry.npm.taobao.org/</code>切换国内源安装。</del><br>手动安装插件还是失败了，最后使用的是github上的<a href=https://mogeko.me/2019/066/>imgbot压缩</a>。<br><img src=https://cdn.jsdelivr.net/gh/wmillers/cdn/img/20210110130422.png alt=测试用图></p></li><li><p><input checked disabled type=checkbox> A copy of help pages in <a href=//themes.gohugo.io/theme/hugo-theme-learn/en/><code>Book</code> Demo Site</a><br><strong>Contents are Above</strong></p></li><li><p><input checked disabled type=checkbox> Add customized main page, remove robot.txt after completion</p></li></ul><blockquote><p>Some changes are inspired by <a href=//www.321dz.com/2004.html>Darren</a>&rsquo;s and <a href=https://www.testsmirk.com/friendlink/>TestSmirk</a> blogs built by wordpress.</p></blockquote><ul><li><input checked disabled type=checkbox> 文章尾部的： copyright信息 <a href=https://github.com/liuzc/LeaveIt/blob/master/layouts/_default/single.html><strong>参照1</strong></a> <a href=https://blog.hgtweb.com/2019/hugo-mermaid/><strong>参照页面</strong></a></li><li><input checked disabled type=checkbox> 菜单尾部的： bulit by Hugo, powered by &mldr; <a href=https://note.qidong.name/2017/06/24/hugo-word-count/><strong>参照</strong></a></li><li><input checked disabled type=checkbox> Read count: <strong>Valine</strong> with Leancloud support</li><li><input checked disabled type=checkbox> Word count <a href=https://themes.gohugo.io//theme/hugo-theme-pure/post/rich-content/>pure</a>: <a href=https://github.com/xiaoheiAh/hugo-theme-pure/blob/master/layouts/partials/article.html>single.html</a> & <a href=https://github.com/xiaoheiAh/hugo-theme-pure/blob/master/layouts/partials/post/wc.html><strong>wordcount.html</strong></a></li><li><input checked disabled type=checkbox> 支持脑图的显示(<a href=https://github.com/fex-team/kityminder>Kityminder</a>)<br><a href=https://github.com/LancelotLewis/local-kitymind>在线绘制</a>导出Markdown格式跟能用的不一样，可以使用的是无序列表，但导出的却是标题，所以<strong>绘制功能最后还是删了</strong><a href=https://wocai.de/post/2019/03/hugo-%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/>Mind map</a> support <a href=https://github.com/zhaohuabing/hugo-theme-cleanwhite/blob/master/layouts/shortcodes/mind.html>参考文件</a>
<script src=/mindmap/mindmap.min.js></script><script src=/mindmap/kity.min.js></script><script src=/mindmap/kityminder.core.min.js></script><link rel=stylesheet href=/mindmap/mindmap.css><div class="mindmap mindmap-lg"><ul><li>Root<ul><li>Level 1<ul><li>Level 2</li><li>Level 2<ul><li>Level 3</li><li>Level 3<ul><li>Level 4<ul><li>Level 5<ul><li>Level 6</li></ul></li></ul></li></ul></li></ul></li></ul></li><li>Level 1<ul><li>Level 2</li><li>Level 2</li></ul></li><li>Level 1<ul><li>Level 2</li><li>Level 2</li></ul></li><li>Level 1<ul><li>Level 2</li><li>Level 2</li></ul></li><li>Level 1<ul><li>Level 2</li><li>Level 2</li></ul></li></ul></li></ul></div></li></ul><blockquote><p>Some are also good, but just write here not going to add</p></blockquote><ul><li>Tag cloud
<strong>新主题<code>Book</code>在Section下侧边栏会显示每个分类和所包括文章数，所以不再需要了</strong></li><li>Add <a href=https://wocai.de/post/2018/08/%E7%94%A8-hugo-%E5%92%8C-netlify-%E6%90%AD%E5%BB%BAblog/>Netlify</a> to auto-generate public/ site<br><strong>暂时没必要，现在的方案是</strong><br><script src=/mermaid.min.js></script><script>mermaid.initialize({"flowchart":{"useMaxWidth":true},"theme":"neutral"})</script><p class=mermaid>graph LR;
A[hugo --minify]-->|cd ./public/|B[git push<br>#submodule x.github.io]-->|cd ..|C[git psuh<br>#raw hugo file]</p></li><li>&mldr;</li></ul></p></article><script src=/qrious.min.js></script><script>hasQr=false;function showQr(on){if(on&&!hasQr){(function(){var qr=new QRious({element:document.getElementById('qr'),value:window.location.href});})();hasQr=true;}
document.getElementById('qr').style.display=on?"block":"none";}</script><div style="margin-top:2rem;border-top:1px solid #dcdcdc;border-bottom:1px solid #dcdcdc" onmouseover=showQr(true) onmouseout=showQr(false)><canvas id=qr style=position:absolute;right:1rem></canvas>
<small><p class=copyright-item><b>调查员 :</b>
<span>wmillers</span></p><p class=copyright-item><b>区域（二维码）:</b>
<a href=https://wmillers.github.io/posts/blog-change-theme-record/>https://wmillers.github.io/posts/blog-change-theme-record/</a></p><b><p class="copyright-item lincese">采用<a rel=license href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank>知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可</p></b></small></div><footer class=book-footer><div class="flex flex-wrap justify-between"></div></footer><div class=book-comments><span id=/posts/blog-change-theme-record/ class=leancloud_visitors data-flag-title="切换博客主题 & 阶段性整理原有主题修改"><small><details class=post-meta-item-text><summary>时空乱流记录</summary>
<a href=https://console.leancloud.app/ target=_blank><img src=/90cf159733e558137ed20aa04d09964436f618a1.png style=max-width:27px><small> <span class=leancloud-visitors-count></span>+</small></a></details></small></span><br><div id=vcomments></div><script src=/av-min.js></script><script src=/Valine.min.js></script><script type=text/javascript>new Valine({el:'#vcomments',appId:'O8B7EmkI0g7b1RzB4FtJrXvl-MdYXbMMI',appKey:'KM4TV4SUH6qzz8sN8JWU9tKL',avatar:'mp',placeholder:'说点什么吧...',visitor:true,requiredFields:["mail"],emojiCDN:'//i0.hdslb.com/bfs/emote/',emojiMaps:{"tv_doge":"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png","tv_亲亲":"a8111ad55953ef5e3be3327ef94eb4a39d535d06.png","tv_偷笑":"bb690d4107620f1c15cff29509db529a73aee261.png","tv_再见":"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png","tv_冷漠":"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png","tv_发怒":"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png","tv_发财":"34db290afd2963723c6eb3c4560667db7253a21a.png","tv_可爱":"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png","tv_吐血":"09dd16a7aa59b77baa1155d47484409624470c77.png","tv_呆":"fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png","tv_呕吐":"9f996894a39e282ccf5e66856af49483f81870f3.png","tv_困":"241ee304e44c0af029adceb294399391e4737ef2.png","tv_坏笑":"1f0b87f731a671079842116e0991c91c2c88645a.png","tv_大佬":"093c1e2c490161aca397afc45573c877cdead616.png","tv_大哭":"23269aeb35f99daee28dda129676f6e9ea87934f.png","tv_委屈":"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png","tv_害羞":"a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png","tv_尴尬":"7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png","tv_微笑":"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png","tv_思考":"90cf159733e558137ed20aa04d09964436f618a1.png","tv_惊吓":"0d15c7e2ee58e935adc6a7193ee042388adc22af.png","雪未来-太棒了":"d03c1d062bb4f346c1041ca60bc763d404ddbd56.png","雪未来-摸头":"c7389d48b89699ecfeec373f90c8c26ea6d3496b.png","雪未来-击掌":"bd257c4ce22fca6a810c74873e90b343ddcead68.png","雪未来-等一等":"16e50092a82375171513018f372ed72377fcd979.png","雪未来-忽然出现":"02ba37478cdb287f40b2a328c5755873937cc417.png","雪未来-喝奶茶":"7847100be4de8cb3bf25825af165bed4f0668084.png","雪未来-冲呀":"d5a14055c8b4b457d7d815c79e7e4180299b375d.png","雪未来-下雪了":"12d2ef42e75d2806bb8a071476e825c58e797f1a.png","雪未来-堆雪人":"b2ee932586ee69f1a5ba69676f5fd345b4cd069a.png","雪未来-赖床":"239d2acb5dc2b96ec98af1ba1a81f49c8b211cd4.png","雪未来-忍住不笑":"852cc4cc73caa982b07bcbe48683d20be6c8df61.png","雪未来-打气":"1eafe084dccb3c8afff05b21d302e40e06dd07dd.png","雪未来-叹气":"a515cd6aa54093c1ccb364f22360620e2d5d76cb.png","雪未来-给你惊喜":"0b552c42157aef2002f8e9c05b06939ac3226127.png","雪未来-生气":"27e30065621ff3c981102b60865872d1be40fcd7.png","雪未来-早安":"7d941da6f69bf256b71b2f4c813c9e15bc6f89fa.png","雪未来-挠头":"6c5f3b58a568185b9844e902c632ee5cf362170d.png","雪未来-嘿嘿":"7bee0f7af3eef454f9107e883b1c5988fada42a5.png","雪未来-唱歌":"1ac8692986fc4e3d271fa14289f99d5d11dee54d.png","雪未来-泪目":"7d721758533a060933d6cef176012bf15f0fba81.png",}});</script></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#changes-comparasion-in-these-two-themes>Changes comparasion in these two themes</a><ul><li><a href=#old-changes-i-made-in-diary-theme>Old changes I made in <code>Diary</code> theme</a></li><li><a href=#new-functionality-in-book-theme>New functionality in <code>Book</code> theme</a></li></ul></li><li><a href=#todo-list-in-book-theme>TODO List in <code>Book</code> theme</a></li></ul></nav></aside></main></body></html>